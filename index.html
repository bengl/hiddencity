<html>
  <head>
    <script type="text/javascript" src="js/gamepad.js"></script>
    <script type="text/javascript" src="js/tester.js"></script>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
  </head>
  <body>

    <div id="support-dialog">
      <div id='no-gamepad-support'>
      Your browser does not seem to support Gamepad API, or it might be
      weâ€™re not detecting it very well. Sorry!
      </div>
      <div id='no-gamepads-connected'>
      No gamepads seem to be connected. Be sure to plug in a gamepad and then
      press any of its buttons to activate it.
      </div>
    </div>
    
    <div id="field">
      <div id="p1" class="player"></div>
      <div id="p2" class="player"></div>
    </div>
    
    <script>
      if(window!==top){
        document.body.classList.add('iframe');
      }
      // document.querySelector('#mode-visual').addEventListener('click',tester.updateMode,false);
      // document.querySelector('#mode-raw').addEventListener('click',tester.updateMode,false);
      tester.init();
      gamepadSupport.init();
      
      function updateScreen(){
        locx = (navigator.webkitGetGamepads()[0].axes[0]+1)/2*document.height;
        locy = (navigator.webkitGetGamepads()[0].axes[1]+1)/2*document.width;
        $('#p1').css('top', locy+'px');
        $('#p1').css('left', locx+'px');
        // locx = (navigator.webkitGetGamepads()[1].axes[0]+1)/2*document.height;
        // locy = (navigator.webkitGetGamepads()[1].axes[1]+1)/2*document.width;
        // $('#cursor2').css('top', locy+'px');
        // $('#cursor2').css('left', locx+'px');
        setTimeout('updateScreen();', 20);
      }
      $(document).ready(function(){
        updateScreen();
      });
    </script>
  </body>
</html>